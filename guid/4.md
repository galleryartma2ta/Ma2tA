**توضیحات کامل نصب پیش‌نیازها در اوبونتو (گام ۴):**

---

### **۱. به‌روزرسانی سیستم**
قبل از نصب هر چیزی، سیستم را به‌روز و پکیج‌های موجود را آپگرید کنید:
```bash
sudo apt update && sudo apt upgrade -y
```

---

### **۲. نصب ابزارهای پایه**
ابزارهای ضروری برای توسعه را نصب کنید:
```bash
sudo apt install -y \
    curl \          # انتقال داده از اینترنت
    git \           # کنترل نسخه
    sqlite3 \       # دیتابیس SQLite
    build-essential \ # کامپایلرهای C/C++
    libssl-dev \    # کتابخانه SSL
    zlib1g-dev \    # فشرده‌سازی
    libpq-dev       # توسعه PostgreSQL
```

---

### **۳. نصب Go (زبان بک‌اند)**
#### **دانلود و نصب Go 1.21:**
```bash
# دانلود آخرین نسخه Go
curl -OL https://golang.org/dl/go1.21.1.linux-amd64.tar.gz

# حذف نسخه‌های قدیمی (اگر وجود دارد)
sudo rm -rf /usr/local/go

# اکسترکت فایل
sudo tar -C /usr/local -xzf go1.21.1.linux-amd64.tar.gz
```

#### **تنظیم متغیرهای محیطی:**
- فایل `~/.bashrc` را ویرایش کنید:
  ```bash
  echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
  echo 'export GOPATH=$HOME/go' >> ~/.bashrc
  echo 'export PATH=$PATH:$GOPATH/bin' >> ~/.bashrc
  ```
- اعمال تغییرات:
  ```bash
  source ~/.bashrc
  ```

#### **اعتبارسنجی:**
```bash
go version
# خروجی باید مشابه باشد: go version go1.21.1 linux/amd64
```

---

### **۴. نصب Node.js و npm (برای فرانت‌اند)**
#### **نصب NVM (Node Version Manager):**
```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash
```

#### **بارگذاری NVM در محیط:**
```bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
```

#### **نصب Node.js 18 (LTS):**
```bash
nvm install 18
nvm use 18
```

#### **اعتبارسنجی:**
```bash
node --version  # باید v18.x.x چاپ شود
npm --version   # باید 9.x.x چاپ شود
```

---

### **۵. نصب Flutter (برای موبایل)**
#### **کلون ریپازیتوری Flutter:**
```bash
git clone https://github.com/flutter/flutter.git -b stable --depth 1
```

#### **اضافه کردن Flutter به PATH:**
```bash
echo 'export PATH="$PATH:$HOME/flutter/bin"' >> ~/.bashrc
source ~/.bashrc
```

#### **اعتبارسنجی و تکمیل وابستگی‌ها:**
```bash
flutter doctor
```

#### **رفع خطاهای احتمالی:**
- **Android SDK پیدا نشد:**  
  Android Studio را نصب و SDK را تنظیم کنید:
  ```bash
  sudo apt install openjdk-11-jdk
  flutter config --android-sdk /path/to/android/sdk
  ```
- **لیسانس‌های Android:**  
  ```bash
  flutter doctor --android-licenses
  # همه لیسانس‌ها را با y تایید کنید
  ```

---

### **۶. نصب Docker (اختیاری - اگر با docker-compose اجرا نمی‌کنید)**
```bash
sudo apt install docker.io docker-compose
sudo systemctl enable docker
sudo systemctl start docker
# افزودن کاربر به گروه Docker
sudo usermod -aG docker $USER
newgrp docker
```

---

### **۷. نصب PostgreSQL (اختیاری - برای محیط تولید)**
```bash
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
# ایجاد کاربر و دیتابیس
sudo -u postgres psql -c "CREATE USER ma2ta WITH PASSWORD 'password';"
sudo -u postgres psql -c "CREATE DATABASE ma2ta OWNER ma2ta;"
```

---

### **۸. نصب Redis (برای کشینگ)**
```bash
sudo apt install redis-server
sudo systemctl start redis
sudo systemctl enable redis
```

---

### **مشکلات رایج و راه‌حل‌ها**
#### **۱. خطای `Permission Denied`**
- اگر دسترسی به پوشه‌ها ندارید از `sudo` استفاده کنید یا مجوزها را تغییر دهید:
  ```bash
  sudo chown -R $USER:$USER /usr/local/go
  ```

#### **۲. خطای `Command not found`**
- مطمئن شوید مسیرها در `~/.bashrc` درست اضافه شده و `source` شده‌اند:
  ```bash
  source ~/.bashrc
  ```

#### **۳. خطای اینترنت**
- اگر دانلود پکیج‌ها کند است، از آینه‌های ایرانی استفاده کنید:
  ```bash
  # برای apt
  sudo sed -i 's/archive.ubuntu.com/ir.archive.ubuntu.com/g' /etc/apt/sources.list
  # برای npm
  npm config set registry http://registry.npm.ir
  ```

---

**نکات نهایی:**  
- پس از نصب همه موارد، سیستم را ری‌استارت کنید:
  ```bash
  sudo reboot
  ```
- برای اطمینان از سلامت محیط توسعه، دستورات اعتبارسنجی (`go version`, `node --version`, `flutter doctor`) را اجرا کنید.