**آموزش صفر تا صد اجرای پروژه Ma2tA**

---

### **مراحل نصب و اجرا:**

#### **۱. پیش‌نیازها**
- **سیستم عامل:** ویندوز ۱۰/۱۱ با قابلیت WSL2 ([فعال‌سازی WSL2](https://learn.microsoft.com/fa-ir/windows/wsl/install))
- **Docker Desktop** ([دانلود](https://www.docker.com/products/docker-desktop/))
- **VS Code** ([دانلود](https://code.visualstudio.com/)) + اکستنشن‌های:
  - Remote - WSL
  - Go, Svelte, Flutter
- **Git** ([دانلود](https://git-scm.com/))

---

#### **۲. کلون پروژه**
```bash
git clone https://github.com/yourusername/Ma2tA.git
cd Ma2tA
```

---

#### **۳. راه‌اندازی محیط توسعه با Docker**
1. **اجرای کانتینر اوبونتو:**
   ```bash
   docker-compose up -d --build
   ```

2. **اتصال به کانتینر اوبونتو:**
   ```bash
   docker exec -it ma2ta-ubuntu bash
   ```

---

#### **۴. نصب پیش‌نیازها در اوبونتو**
- **نصب Go:**
  ```bash
  apt update && apt upgrade -y
  apt install -y curl git sqlite3 build-essential
  curl -OL https://golang.org/dl/go1.21.1.linux-amd64.tar.gz
  tar -C /usr/local -xzf go1.21.1.linux-amd64.tar.gz
  echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
  source ~/.bashrc
  ```

- **نصب Node.js:**
  ```bash
  curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash
  source ~/.bashrc
  nvm install 18
  nvm use 18
  ```

- **نصب Flutter:**
  ```bash
  git clone https://github.com/flutter/flutter.git -b stable
  echo 'export PATH="$PATH:/flutter/bin"' >> ~/.bashrc
  source ~/.bashrc
  flutter doctor
  ```

---

#### **۵. پیکربندی پروژه**
- **بک‌اند** (فایل `backend/.env`):
  ```env
  GIN_MODE=debug
  DB_PATH=/data/ma2ta.db
  ZARINPAL_MERCHANT_ID=your_merchant_id
  PORT=8080
  ```

- **فرانت‌اند** (فایل `frontend/.env`):
  ```env
  VITE_API_URL=http://localhost:8080/api
  VITE_DEFAULT_LANG=fa
  ```

- **موبایل** (فایل `mobile/lib/config.dart`):
  ```dart
  const String kApiUrl = "http://10.0.2.2:8080/api";
  const String kZarinpalCallback = "zarinpal://ma2ta-verify";
  ```

---

#### **۶. اجرای پروژه**
1. **بک‌اند:**
   ```bash
   cd backend
   go mod tidy
   go run cmd/main.go
   ```

2. **فرانت‌اند:**
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

3. **موبایل:**
   ```bash
   cd mobile
   flutter pub get
   flutter run -d chrome
   ```

---

### **۷. تست پروژه**
- **تست API با Postman/curl:**
  ```bash
  curl http://localhost:8080/api/v1/products
  ```

- **تست UI فرانت‌اند:**  
  مرورگر را باز کنید و به `http://localhost:3000` بروید.

- **تست اپ موبایل:**  
  اپ را در شبیه‌ساز یا دستگاه واقعی اجرا کنید.

---

### **۸. دیباگ پروژه**
- **اسکریپت‌های آماده:**
  ```bash
  # بک‌اند
  ./scripts/debug-backend.sh

  # فرانت‌اند
  ./scripts/debug-frontend.sh

  # موبایل
  ./scripts/debug-mobile.sh
  ```

---

### **۹. دپلوی پروژه**
1. **با Docker Compose:**
   ```bash
   docker-compose -f docker-compose.prod.yml up -d
   ```

2. **با Kubernetes** (مثال `deployment.yaml`):
   ```yaml
   apiVersion: apps/v1
   kind: Deployment
   metadata:
     name: ma2ta-backend
   spec:
     replicas: 3
     template:
       spec:
         containers:
         - name: backend
           image: your-dockerhub/ma2ta-backend
           ports:
           - containerPort: 8080
   ```

3. **روی سرویس‌های ابری** (Heroku, AWS, DigitalOcean):
   - از Docker یا فایل‌های Build استفاده کنید.

---

### **۱۰. عیب‌یابی رایج**
- **خطای CORS:**  
  مطمئن شوید میدلور CORS در `backend/middleware/cors.go` فعال است.

- **خطای دیتابیس:**  
  دسترسی به فایل دیتابیس را بررسی کنید:
  ```bash
  sudo chmod 777 -R ./data
  ```

- **خطای وابستگی‌ها:**  
  وابستگی‌ها را دوباره نصب کنید:
  ```bash
  go mod tidy && npm install && flutter pub get
  ```

---

### **۱۱. قدم‌های بعدی**
- **اضافه کردن ویژگی‌ها:**  
  - سیستم نظردهی کاربران  
  - جستجوی پیشرفته  
  - پنل مدیریت  

- **بهینه‌سازی:**  
  - کشینگ با Redis  
  - بارگذاری تنبل (Lazy Loading)  

- **امنیت:**  
  - احراز هویت دو مرحله‌ای  
  - اسکن منظم آسیب‌پذیری‌ها  

---

**قدم‌های بعدی برای توسعه پروژه Ma2tA:**

### ۱. **بهبود سیستم احراز هویت**
- **احراز دو مرحله‌ای (2FA):**  
  - پیاده‌سازی با استفاده از پیامک یا اپلیکیشن‌های Authenticator (مثل Google Authenticator).
- **ورود با شبکه‌های اجتماعی:**  
  - افزودن امکان ورود با Google، Apple یا فیسبوک.

### ۲. **پیاده‌سازی پنل مدیریت**
- **ویژگی‌ها:**  
  - مدیریت محصولات، سفارش‌ها و کاربران.
  - آمار فروش و گزارش‌های تحلیلی.
- **تکنولوژی:**  
  - استفاده از SvelteKit برای فرانت‌اند و REST API برای ارتباط با بک‌اند.

### ۳. **افزودن جستجوی پیشرفته**
- **فیلترها:**  
  - قیمت، دسته‌بندی، امتیاز و برند.
- **جستجوی هوشمند:**  
  - پشتیبانی از جستجوی متنی با استفاده از **Elasticsearch** یا **Algolia**.

### ۴. **ساخت سیستم نظردهی و امتیازدهی**
- **ویژگی‌ها:**  
  - امکان ثبت نظر و امتیاز (۱ تا ۵ ستاره) برای محصولات.
  - نمایش میانگین امتیازها در صفحه محصول.
- **امنیت:**  
  - جلوگیری از نظرهای جعلی با احراز هویت کاربران.

### ۵. **پشتیبانی از چند درگاه پرداخت**
- **درگاه‌های اضافی:**  
  - آیدی پی، پارسیان، نوین.
- **یکپارچه‌سازی:**  
  - طراحی ماژولار برای افزودن آسان درگاه‌های جدید.

### ۶. **بهینه‌سازی عملکرد**
- **کشینگ:**  
  - استفاده از **Redis** برای کش داده‌های پرتکرار (مثل محصولات پربازدید).
- **بارگذاری تنبل (Lazy Loading):**  
  - بهینه‌سازی تصاویر و کامپوننت‌ها برای بارگذاری سریع‌تر.

### ۷. **تست‌های خودکار**
- **تست‌های End-to-End:**  
  - استفاده از **Cypress** یا **Playwright** برای تست UI.
- **تست‌های Load:**  
  - بررسی تحمل بار بالا با **JMeter** یا **k6**.

### ۸. **پشتیبانی از چندزبانه (i18n)**
- **زبان‌ها:**  
  - فارسی، انگلیسی، عربی.
- **پیاده‌سازی:**  
  - استفاده از کتابخانه‌های i18n در SvelteKit و Flutter.

### ۹. **پیاده‌سازی سیستم توصیه‌گر**
- **الگوریتم‌ها:**  
  - پیشنهاد محصولات بر اساس تاریخچه خرید یا بازدید کاربران.
- **یکپارچه‌سازی:**  
  - استفاده از **TensorFlow Lite** یا **Apache Mahout**.

### ۱۰. **مستندسازی پیشرفته**
- **مستندات فنی:**  
  - تکمیل Swagger برای API و افزودن مثال‌های کد.
- **راهنمای توسعه‌دهنده:**  
  - ایجاد فایل `CONTRIBUTING.md` با جزئیات مشارکت.

---

**نکات نهایی:**
- **بازخورد کاربران:**  
  - ایجاد فرم بازخورد در وبسایت و اپ موبایل.
- **بروزرسانی مداوم:**  
  - رفع باگ‌ها و بهبود تجربه کاربری بر اساس نظرات کاربران.
- **تبلیغات:**  
  - استفاده از گوگل ادز و شبکه‌های اجتماعی برای جذب کاربران جدید.

اگر نیاز به راهنمایی بیشتر در هر مرحله دارید، خوشحال میشم کمکتون کنم! 🚀

