**Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ… Ù†Ø¸Ø±Ø¯Ù‡ÛŒ Ùˆ Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ma2tA**  

---

### **Û±. Ø·Ø±Ø§Ø­ÛŒ Ù…Ø¯Ù„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Database Schema)**  
Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø¸Ø±Ø§Øª Ùˆ Ø§Ù…ØªÛŒØ§Ø²Ù‡Ø§ØŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¬Ø¯Ø§ÙˆÙ„ Ø²ÛŒØ± Ø¯Ø§Ø±ÛŒÙ…:

#### **Ø¬Ø¯ÙˆÙ„ `reviews`**  
| ÙÛŒÙ„Ø¯         | Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡     | ØªÙˆØ¶ÛŒØ­Ø§Øª                     |  
|--------------|-------------|----------------------------|  
| `id`         | UUID        | Ø´Ù†Ø§Ø³Ù‡ ÛŒÚ©ØªØ§                 |  
| `product_id` | UUID        | Ø´Ù†Ø§Ø³Ù‡ Ù…Ø­ØµÙˆÙ„ Ù…Ø±ØªØ¨Ø·          |  
| `user_id`    | UUID        | Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù†Ø¸Ø± Ø¯Ù‡Ù†Ø¯Ù‡      |  
| `rating`     | INTEGER     | Ø§Ù…ØªÛŒØ§Ø² (Û± ØªØ§ Ûµ)            |  
| `comment`    | TEXT        | Ù…ØªÙ† Ù†Ø¸Ø±                    |  
| `created_at` | TIMESTAMP   | ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯                |  
| `status`     | ENUM        | ÙˆØ¶Ø¹ÛŒØª (ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡/Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±/Ø±Ø¯ Ø´Ø¯Ù‡) |  

#### **Ø¬Ø¯ÙˆÙ„ `product_stats`**  
| ÙÛŒÙ„Ø¯            | Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡     | ØªÙˆØ¶ÛŒØ­Ø§Øª                     |  
|-----------------|-------------|----------------------------|  
| `product_id`    | UUID        | Ø´Ù†Ø§Ø³Ù‡ Ù…Ø­ØµÙˆÙ„                |  
| `total_ratings` | INTEGER     | ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø§Ù…ØªÛŒØ§Ø²Ù‡Ø§          |  
| `avg_rating`    | FLOAT       | Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø² (ØªØ§ Û± Ø±Ù‚Ù… Ø§Ø¹Ø´Ø§Ø±) |  

---

### **Û². Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ø¨Ú©â€ŒØ§Ù†Ø¯ (Go + Gin)**  

#### **Ø§Ù„Ù) Ø«Ø¨Øª Ù†Ø¸Ø± Ùˆ Ø§Ù…ØªÛŒØ§Ø²**  
```go  
// Ù…Ø¯Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª  
type ReviewRequest struct {  
    ProductID string `json:"product_id" binding:"required"`  
    Rating    int    `json:"rating" binding:"required,min=1,max=5"`  
    Comment   string `json:"comment" binding:"max=500"`  
}  

// Ù‡Ù†Ø¯Ù„Ø± Ø«Ø¨Øª Ù†Ø¸Ø±  
func SubmitReview(c *gin.Context) {  
    var req ReviewRequest  
    if err := c.ShouldBindJSON(&req); err != nil {  
        c.JSON(400, gin.H{"error": err.Error()})  
        return  
    }  

    // Ø¨Ø±Ø±Ø³ÛŒ Ø¢ÛŒØ§ Ú©Ø§Ø±Ø¨Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ø§Ø¯Ù‡ Ø§Ø³Øª  
    var existingReview Review  
    if err := db.Where("user_id = ? AND product_id = ?", userID, req.ProductID).First(&existingReview).Error; err == nil {  
        c.JSON(400, gin.H{"error": "Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯"})  
        return  
    }  

    // Ø°Ø®ÛŒØ±Ù‡ Ù†Ø¸Ø± Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³  
    review := Review{  
        ProductID: req.ProductID,  
        UserID:    userID,  
        Rating:    req.Rating,  
        Comment:   req.Comment,  
        Status:    "pending", // Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ§ÛŒÛŒØ¯ Ø§Ø¯Ù…ÛŒÙ†  
    }  
    db.Create(&review)  

    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ù…Ø­ØµÙˆÙ„  
    UpdateProductStats(req.ProductID)  

    c.JSON(200, gin.H{"message": "Ù†Ø¸Ø± Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯ Ùˆ Ù¾Ø³ Ø§Ø² ØªØ§ÛŒÛŒØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯"})  
}  
```  

#### **Ø¨) Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²Ù‡Ø§**  
```go  
func UpdateProductStats(productID string) {  
    var avgRating float64  
    db.Model(&Review{}).Where("product_id = ? AND status = 'approved'", productID).Select("AVG(rating)").Row().Scan(&avgRating)  

    // Ú¯Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Û± Ø±Ù‚Ù… Ø§Ø¹Ø´Ø§Ø±  
    avgRating = math.Round(avgRating*10) / 10  

    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÛŒØ§ Ø§ÛŒØ¬Ø§Ø¯ Ø±Ú©ÙˆØ±Ø¯  
    db.Exec(`  
        INSERT INTO product_stats (product_id, total_ratings, avg_rating)  
        VALUES (?, ?, ?)  
        ON CONFLICT (product_id) DO UPDATE  
        SET total_ratings = EXCLUDED.total_ratings, avg_rating = EXCLUDED.avg_rating  
    `, productID, totalRatings, avgRating)  
}  
```  

---

### **Û³. Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ (SvelteKit)**  

#### **Ø§Ù„Ù) Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ø¨Ø§ Ø³ØªØ§Ø±Ù‡**  
```svelte  
<!-- src/components/RatingStars.svelte -->  
<script>  
  export let productId;  
  export let userRating = 0;  
  let selectedRating = 0;  

  async function submitRating(rating) {  
    if (userRating !== 0) return; // Ú©Ø§Ø±Ø¨Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ø§Ø¯Ù‡  

    const res = await fetch(`/api/products/${productId}/reviews`, {  
      method: "POST",  
      headers: { "Content-Type": "application/json" },  
      body: JSON.stringify({ rating }),  
    });  

    if (res.ok) {  
      userRating = rating;  
    }  
  }  
</script>  

<div class="rating">  
  {#each [1, 2, 3, 4, 5] as i}  
    <button  
      class="star {i <= selectedRating || i <= userRating ? 'active' : ''}"  
      on:click={() => submitRating(i)}  
      on:mouseover={() => selectedRating = i}  
      on:mouseout={() => selectedRating = 0}  
    >  
      â­  
    </button>  
  {/each}  
</div>  

<style>  
  .star {  
    background: none;  
    border: none;  
    cursor: pointer;  
    font-size: 1.5rem;  
  }  
  .star.active {  
    color: #f59e0b;  
  }  
</style>  
```  

#### **Ø¨) Ù†Ù…Ø§ÛŒØ´ Ù†Ø¸Ø±Ø§Øª Ùˆ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²**  
```svelte  
<!-- src/routes/products/[id].svelte -->  
<script>  
  export let product;  
  let reviews = [];  

  async function fetchReviews() {  
    const res = await fetch(`/api/products/${product.id}/reviews`);  
    reviews = await res.json();  
  }  

  $: fetchReviews();  
</script>  

<div class="product-ratings">  
  <h3>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²: {product.avg_rating}/5 ({product.total_ratings} Ù†Ø¸Ø±)</h3>  
  <RatingStars productId={product.id} userRating={0} />  
</div>  

<div class="reviews">  
  {#each reviews as review}  
    <div class="review">  
      <div class="rating">{'â­'.repeat(review.rating)}</div>  
      <p>{review.comment}</p>  
      <small>Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· {review.user.name} Ø¯Ø± {review.created_at}</small>  
    </div>  
  {/each}  
</div>  
```  

---

### **Û´. Ø³ÛŒØ³ØªÙ… Ù…ÙˆØ¯Ø±ÛŒØ´Ù† (Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ø¸Ø±Ø§Øª)**  

#### **Ø§Ù„Ù) Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ø¸Ø±Ø§Øª**  
- **APIÙ‡Ø§ÛŒ Ù„Ø§Ø²Ù…:**  
  - `GET /admin/reviews` (Ù„ÛŒØ³Øª Ù†Ø¸Ø±Ø§Øª Ù…Ù†ØªØ¸Ø± ØªØ§ÛŒÛŒØ¯)  
  - `PUT /admin/reviews/:id/approve` (ØªØ§ÛŒÛŒØ¯ Ù†Ø¸Ø±)  
  - `DELETE /admin/reviews/:id` (Ø­Ø°Ù Ù†Ø¸Ø±)  

#### **Ø¨) ÙÛŒÙ„ØªØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ù†Ø¸Ø±Ø§Øª Ù†Ø§Ù…Ù†Ø§Ø³Ø¨**  
```go  
// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø³ÙˆÙ… Ø´Ø®Øµ Ù…Ø«Ù„ Perspective API  
func containsInappropriateContent(text string) bool {  
    resp, _ := http.Post("https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze", "application/json", bytes.NewBufferString(fmt.Sprintf(`{  
        "comment": { "text": "%s" },  
        "requestedAttributes": { "TOXICITY": {} }  
    }`, text)))  

    var result map[string]interface{}  
    json.NewDecoder(resp.Body).Decode(&result)  
    toxicityScore := result["attributeScores"].(map[string]interface{})["TOXICITY"].(map[string]interface{})["summaryScore"].(map[string]interface{})["value"].(float64)  

    return toxicityScore > 0.7  
}  
```  

---

### **Ûµ. Ø§Ù…Ù†ÛŒØª Ùˆ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ**  
- **Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§:**  
  - ÙÙ‚Ø· Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù„Ø§Ú¯ÛŒÙ†â€ŒØ´Ø¯Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ù†Ø¸Ø± Ø¯Ù‡Ù†Ø¯.  
  - Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ù‡Ø± Ù…Ø­ØµÙˆÙ„ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ù‡Ø¯.  
  - Ø­Ø¯Ø§Ú©Ø«Ø± Ø·ÙˆÙ„ Ù†Ø¸Ø±: ÛµÛ°Û° Ú©Ø§Ø±Ø§Ú©ØªØ±.  
  - Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û± ØªØ§ Ûµ Ø¨Ø§Ø´Ø¯.  

---

### **Û¶. ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡**  
#### **Ø§Ù„Ù) ØªØ³Øª Ø«Ø¨Øª Ù†Ø¸Ø± ØªÚ©Ø±Ø§Ø±ÛŒ**  
```http  
POST /api/products/abc123/reviews  
Authorization: Bearer <token>  
Content-Type: application/json  

{ "rating": 4, "comment": "Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯!" }  

// Ù¾Ø§Ø³Ø®: 400 Bad Request  
{ "error": "Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯" }  
```  

#### **Ø¨) ØªØ³Øª ÙÛŒÙ„ØªØ± Ù†Ø¸Ø±Ø§Øª Ù†Ø§Ù…Ù†Ø§Ø³Ø¨**  
```http  
POST /api/products/abc123/reviews  
Authorization: Bearer <token>  
Content-Type: application/json  

{ "rating": 1, "comment": "Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø§ÙØªØ¶Ø§Ø­ Ø§Ø³Øª!" }  

// Ù¾Ø§Ø³Ø®: 200 OK (Ø§Ù…Ø§ Ù†Ø¸Ø± Ø¨Ø§ status=rejected Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)  
```  

---

**Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ:**  
Ø¨Ø§ Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ…ØŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø±Ø§Ø­ØªÛŒ Ù†Ø¸Ø±Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø«Ø¨Øª Ú©Ù†Ù†Ø¯ Ùˆ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ù‡Ù†Ø¯ØŒ Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ Ø§Ø² Ø§Ù…Ù†ÛŒØª Ùˆ ØµØ­Øª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø­Ø§ØµÙ„ Ø´Ø¯Ù‡ Ø§Ø³Øª! ğŸŒŸğŸ“